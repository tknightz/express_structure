(function(e){function t(t){for(var o,a,s=t[0],u=t[1],i=t[2],b=0,g=[];b<s.length;b++)a=s[b],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&g.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(g.length)g.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(o=!1)}o&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={index:0},c=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var i=0;i<s.length;i++)t(s[i]);var l=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"203c":function(e,t,n){},"2e0c":function(e,t,n){},"3d60":function(e,t,n){"use strict";n("2e0c")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function r(e,t,n,r,c,a){var s=Object(o["t"])("Navbar"),u=Object(o["t"])("router-view");return Object(o["p"])(),Object(o["d"])(o["a"],null,[e.isLoggedIn?(Object(o["p"])(),Object(o["d"])(s,{key:0})):Object(o["e"])("",!0),Object(o["g"])(u)],64)}var c=n("5530"),a=Object(o["f"])("Home"),s=Object(o["f"])("About");function u(e,t,n,r,c,u){var i=Object(o["t"])("router-link");return Object(o["p"])(),Object(o["d"])("ul",null,[Object(o["g"])("li",null,[Object(o["g"])(i,{to:"/"},{default:Object(o["z"])((function(){return[a]})),_:1})]),Object(o["g"])("li",null,[Object(o["g"])(i,{to:"/about"},{default:Object(o["z"])((function(){return[s]})),_:1})]),e.isLoggedIn?(Object(o["p"])(),Object(o["d"])("li",{key:0,onClick:t[1]||(t[1]=function(){return u.doLogout&&u.doLogout.apply(u,arguments)})},"Logout")):Object(o["e"])("",!0)])}var i=n("5502"),l={name:"Navbar",methods:Object(c["a"])(Object(c["a"])({},Object(i["d"])(["logout"])),{},{doLogout:function(){localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.logout(),this.$router.push("/")}}),computed:Object(c["a"])({},Object(i["c"])(["isLoggedIn"]))};n("76d7");l.render=u;var b=l,g={name:"App",components:{Navbar:b},computed:Object(c["a"])({},Object(i["c"])(["isLoggedIn"]))};n("3d60");g.render=r;var d=g,p=(n("99af"),n("b0c0"),n("6c02")),f=n("8905"),O=n.n(f),j={key:0,class:"wrapper"},m={class:"form-login"},h=Object(o["g"])("div",{class:"form-login__left"},[Object(o["g"])("img",{src:O.a,alt:""})],-1),v={class:"form-login__right"},k=Object(o["g"])("h1",{style:{color:"#25aa97"}},"User Login",-1),y={key:1},w=Object(o["g"])("h1",null,"Home page",-1);function T(e,t,n,r,c,a){return Object(o["p"])(),Object(o["d"])(o["a"],null,[e.isLoggedIn?Object(o["e"])("",!0):(Object(o["p"])(),Object(o["d"])("div",j,[Object(o["g"])("div",m,[h,Object(o["g"])("div",v,[e.isLoggedIn?Object(o["e"])("",!0):(Object(o["p"])(),Object(o["d"])("form",{key:0,onSubmit:t[4]||(t[4]=Object(o["B"])((function(){return e.submit&&e.submit.apply(e,arguments)}),["prevent"]))},[k,Object(o["g"])("p",null,Object(o["v"])(c.message),1),Object(o["A"])(Object(o["g"])("input",{class:"input-text",type:"text",name:"username","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.username=e})},null,512),[[o["x"],c.username]]),Object(o["A"])(Object(o["g"])("input",{class:"input-text",type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e})},null,512),[[o["x"],c.password]]),Object(o["g"])("input",{class:"btn btn-submit",type:"submit",value:"Login",onClick:t[3]||(t[3]=function(){return a.login&&a.login.apply(a,arguments)})})],32))])])])),e.isLoggedIn?(Object(o["p"])(),Object(o["d"])("div",y,[w,Object(o["g"])("h1",null,Object(o["v"])(c.users?c.users[0].username:null),1)])):Object(o["e"])("",!0)],64)}n("96cf");var I=n("1da1"),L=n("bc3a"),S=n.n(L),x=S.a.create({baseURL:"http://localhost:8000"}),A={login:function(e){return x.post("/login",{username:e.username,password:e.password})},getUser:function(){var e=localStorage.getItem("accessToken");return x.get("/user/all",{headers:{Authorization:"Bearer ".concat(e)}})},register:function(){return x.post("register")}},_={name:"Home",computed:Object(c["a"])({},Object(i["c"])(["isLoggedIn","getAccessToken"])),created:function(){this.fetchData()},data:function(){return{username:"",password:"",message:"",users:""}},methods:Object(c["a"])(Object(c["a"])({},Object(i["d"])(["setAuth","setAccessToken","setRefreshToken"])),{},{login:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A.login({username:e.username,password:e.password});case 2:return n=t.sent,t.next=5,n.data;case 5:o=t.sent,r=o.accessToken,c=o.refreshToken,r&&c&&(localStorage.setItem("auth",!0),localStorage.setItem("accessToken",r),localStorage.setItem("refreshToken",c),e.setAuth(!0),e.setAccessToken(r),e.setRefreshToken(c),e.fetchData()),e.message=n.data.err;case 10:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;this.isLoggedIn&&A.getUser().then((function(t){e.users=t.data}))}})};n("e7e0");_.render=T;var P=_;function M(e,t,n,r,c,a){return Object(o["p"])(),Object(o["d"])("h1",null,"About page "+Object(o["v"])(e.$store.state.counter),1)}var R={name:"About",computed:Object(c["a"])({},Object(i["c"])(["isLoggedIn"])),created:function(){this.isLoggedIn||this.$router.push("/")}};R.render=M;var U=R,N=Object(o["C"])("data-v-0ec5e1a8"),H=N((function(e,t,n,r,c,a){return Object(o["p"])(),Object(o["d"])("h1",null,"Something went wrong! 404")})),z={name:"NotFound",props:{msg:String}};z.render=H,z.__scopeId="data-v-0ec5e1a8";var C=z,D=[{path:"/",component:P,name:"Home"},{path:"/about",component:U,name:"About"},{path:"/:pathMatch(.*)*",component:C,name:"NotFound"}],$=Object(p["a"])({history:Object(p["b"])(),routes:D});$.beforeEach((function(e,t,n){document.title="".concat("MyPage"," - ").concat(e.name),n()}));var B=$,F=Object(i["a"])({state:{authenticated:localStorage.getItem("auth")||!1,accessToken:localStorage.getItem("accessToken")||"",refreshToken:localStorage.getItem("refreshToken")||""},mutations:{setAuth:function(e,t){return e.authenticated=t},setAccessToken:function(e,t){return e.accessToken=t},setRefreshToken:function(e,t){return e.refreshToken=t},logout:function(e){e.authenticated=!1,e.accessToken="",e.refreshToken=""}},actions:{},getters:{isLoggedIn:function(e){return e.authenticated},getAccessToken:function(e){return e.accessToken}},modules:{}}),J=Object(o["c"])(d);J.use(i["b"]),J.use(F),J.use(B),J.mount("#app")},"5c6f":function(e,t,n){},"76d7":function(e,t,n){"use strict";n("203c")},8905:function(e,t,n){e.exports=n.p+"img/login_fg.727fa83c.png"},e7e0:function(e,t,n){"use strict";n("5c6f")}});
//# sourceMappingURL=index.ca43f82a.js.map